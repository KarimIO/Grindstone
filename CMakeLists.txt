cmake_minimum_required(VERSION 3.5)
project(Grindstone VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)

set(RAPIDJSON_PATH CACHE PATH "RAPIDJSON Path")
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_SOURCE_DIR}/sources/cmake)
# find_package(assimp REQUIRED)
# find_package(Bullet REQUIRED)
# find_package(OpenAL REQUIRED)
set(DEPS_DIR "${CMAKE_CURRENT_SOURCE_DIR}/sources/deps")
set(CODE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/sources/code")
set(COMMON_DIR "${CODE_DIR}/Common")
set(BUILD_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/build)

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${BUILD_DIRECTORY})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${BUILD_DIRECTORY})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${BUILD_DIRECTORY})

foreach( OUTPUTCONFIG ${CMAKE_CONFIGURATION_TYPES} ) 
    string( TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG ) 
    set( CMAKE_RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${BUILD_DIRECTORY} ) 
    set( CMAKE_LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${BUILD_DIRECTORY} ) 
    set( CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${BUILD_DIRECTORY} ) 
endforeach( OUTPUTCONFIG CMAKE_CONFIGURATION_TYPES ) 

add_subdirectory(sources/code/ApplicationDLL)
add_subdirectory(sources/code/Editor)
add_subdirectory(sources/code/EngineCore)
add_subdirectory(sources/code/ApplicationExecutable)

set(PLUGIN_DIR sources/code/Plugins)

add_subdirectory(${PLUGIN_DIR}/GraphicsOpenGL)
add_subdirectory(${PLUGIN_DIR}/GraphicsVulkan)
add_subdirectory(${PLUGIN_DIR}/Camera)
add_subdirectory(${PLUGIN_DIR}/InputSystem)
add_subdirectory(${PLUGIN_DIR}/Materials)
add_subdirectory(${PLUGIN_DIR}/Renderables3D)
add_subdirectory(${PLUGIN_DIR}/RenderPathDeferred)